### Demo Scenario: Automated Creation of a New Document

**Objective:**  
The purpose of this demo is to illustrate how the system creates and registers a new document based on a provided JSON payload and associates it with a specified track and station. The demo will also showcase how the resulting data gets stored in the system's database and can be queried using a raw SQL `SELECT` statement.

---

### Steps to Demonstrate:

---

#### **1. Initial Context and Objective**
1. Provide a brief overview:
   - The system allows users to submit incident descriptions via JSON requests.
   - Each submitted document is registered in the system and linked to a specified **station** and **track.**
2. Mention the target:
   - For this demo, we will process an example JSON payload and register the document at **Station #12001** belonging to **Track #1001.**

---

#### **2. Input Scenario**
1. **Show the Input JSON** to simulate what the system receives:
   ```http
   POST /api/stations/12001/documents  
   ```
   with the following JSON body:
   ```json
   {
     "description": "Oil spill detected near the platform.",
     "priority":"high"
   }
   ```
   - **description**: The incident to be documented (in this case, "Oil spill detected near the platform.").
   - **station_id**: The Station where this document should be associated (Station #12001).
   - **track_id**: The Track associated with the station (Track #1001) - implicitly.

2. Explain the purpose:
   - The system will process this JSON input.
   - It will create an entry in the database to store this incident, linking it to the specified **station** and **track.**

---

#### **3. Backend System Behavior**
1. Explain the automated process:
   - The system ingests the JSON via an API or another input mechanism.
   - It creates a new "document" record based on the provided `incident_description`, `station_id`, and `track_id`.
   - The document is uniquely identified with an auto-generated document ID.
   - The relevant data is stored in a database table (such as `incident_documents`).

2. Briefly mention validation (if applicable):
   - The system checks whether the provided `station_id` and `track_id` are valid. If they are not, the system rejects the request.

---

#### **4. Demonstrate SQL View Before New Document Creation**
1. Use a raw SQL `SELECT` query to show the current state of the relevant data tables or a SQL view:
   ```sql
   SELECT * FROM incident_documents_view WHERE station_id = 12001 AND track_id = 1001;
   ```
2. Expected output (before the document creation):
   - Initially, the result should show no entries for **Station #12001** and **Track #1001**.

---

#### **5. Processing the New Incident Description**
1. Simulate **document creation**:
   - Trigger the system to process the input JSON (manually, via API, or another method).

2. System response:
   - A success message confirming that the document has been created:
     ```
     {
       "documentId": 12345
     }
     ```
   - Note: `documentId` is auto-generated by the system.

---

#### **6. Demonstrate SQL View After Document Creation**
1. Use the same SQL `SELECT` query from earlier to show the updated state of the database/view. Example:
   ```sql
   SELECT * FROM incident_documents_view WHERE station_id = 12001 AND track_id = 1001;
   ```
2. Expected output:
   - The result should now include the newly created document, like so:

     | document_id | station_id | track_id | incident_description                      | created_at          |
     |-------------|------------|----------|-------------------------------------------|---------------------|
     | 12345       | 12001      | 1001     | Oil spill detected near the platform.     | 2023-10-20 12:34:56|

3. Highlight key fields in the output:
   - `document_id`: Unique identifier for the document.
   - `station_id` and `track_id`: IDs linking the document to the correct station and track.
   - `incident_description`: The text field from the JSON input.
   - `created_at`: Timestamp of when the document was created.

---

#### **7. Wrap-Up and Summary**
1. Summarize the steps:
   - The system successfully ingested the JSON input to create a new document.
   - The document was stored in the database and linked to the appropriate station and track.
   - The updated records were verified using a raw SQL query.

2. Emphasize system reliability:
   - Demonstrates how the system enforces structure and data integrity.
   - Showcases the ease of retrieving actionable data using SQL views.

---

This structured demo highlights the functionality of the system, with both the automated backend operation and the transparency of data storage and retrieval. It maintains a logical flow with clear before-and-after states, making it easy to understand for all stakeholders.